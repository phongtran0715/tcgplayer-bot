# Yoor Trading API Documentation

The API documentation for Yoor Trading web can be accessed via these URLs when the application is running locally or in other remote environments such as staging:

* Swagger: `{base_url}/swagger`
* Redocs: `{base_url}/redoc`

Example: [http://127.0.0.1:8001/swagger/](http://127.0.0.1:8001/swagger/)

The documentation is generated using [drf-yasg](https://drf-yasg.readthedocs.io/en/stable/readme.html). This based on Swagger/OpenAPI 2.0 specification.

The Swagger spec file is stored in the `swagger/` folder and an updated version can be generated by running the following command:

```bash
 python manage.py generate_swagger --overwrite swagger/swagger.json
```

The Swagger spec file can then be imported into a third party API client such as Postman or Insomnia.

## Example: Importing Swagger spec file via Postman

1. Go to File > Import
2. Select the `swagger.json` spec file and upload it
3. Once uploaded, go to the root of the new collection i.e. **Yoor Trading Platform**
4. In the Authorization tab section, choose the type to be No Auth.
5. In the Pre-request Script tab section add the custom Authroization header that Django Rest Framework expects in the following form:

```bash
Authorization: Token {token_value}
```

The Pre-request Script should be in the following form:

```json
pm.request.headers.add({key: 'Authorization', value: 'Token {token_value}' });
```

The token value can be generated via the login create endpoint, i.e., `{{base_url}}/login/` with the appropriate request body for authentication (password, username and email in the body).


6. In the Variables tab section, add the base url variable so that it's accessible across the collection and hence no need to add it repetitively in the requests within the collection.
